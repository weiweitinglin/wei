<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>æ˜Ÿéš›æµ®æ°´å°è£½é€ æ©Ÿ</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@400;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../css/galaxy-theme.css" rel="stylesheet" />
    <link href="../css/fix-sizes.css" rel="stylesheet" />
</head>

<body id="page-top" class="watermark-generator">
    <!-- Particles.js æ˜Ÿåº§é€£ç·šèƒŒæ™¯ -->
    <div id="particles-js"></div>
    
    <!-- Main Content -->
    <main class="calculator-container">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <!-- æ¨™é¡Œå€åŸŸ -->
                    <div class="text-center mb-5">
                        <h1 class="cosmic-title">
                            <i class="fas fa-magic me-2"></i>æ˜Ÿéš›æµ®æ°´å°è£½é€ æ©Ÿ
                        </h1>
                        <p class="cosmic-subtitle">éŠ€æ²³ç´šåœ–åƒè™•ç†ç³»çµ±</p>
                        <p class="cosmic-description">é‹ç”¨æ˜Ÿéš›ç§‘æŠ€ç‚ºæ‚¨çš„åœ–ç‰‡æ·»åŠ å°ˆæ¥­æµ®æ°´å°</p>
                        
                        <!-- å¿«é€Ÿå°èˆªæŒ‰éˆ• -->
                        <div class="quick-nav-buttons mt-4">
                            <button type="button" class="btn btn-galaxy-primary me-3" onclick="scrollToUpload()" id="startBtn">
                                <i class="fas fa-upload me-2"></i>é–‹å§‹è£½ä½œ
                            </button>
                            <button type="button" class="btn btn-galaxy-secondary" onclick="goToHomePage()" id="homeBtn">
                                <i class="fas fa-home me-2"></i>è¿”å›é¦–é 
                            </button>
                        </div>
                    </div>

                    <div class="calculator-panel" id="uploadSection">
                        <!-- ä¸Šå‚³å€åŸŸ -->
                        <div class="upload-section mb-4">
                            <div class="upload-card">
                                <div class="upload-header">
                                    <h2><i class="fas fa-cloud-upload-alt me-2"></i>åœ–åƒä¸Šå‚³å°</h2>
                                </div>
                                <div class="upload-body">
                                    <div class="row">
                                        <div class="col-lg-6 mb-3">
                                            <div class="form-floating">
                                                <input type="file" class="form-control cosmic-input" id="watermarkInput" accept="image/*">
                                                <label for="watermarkInput">
                                                    <i class="fas fa-water me-2"></i>ç¬¬ä¸€æ­¥ï¼šä¸Šå‚³æµ®æ°´å°åœ–ç‰‡
                                                </label>
                                            </div>
                                            <div class="preview mt-3" id="watermarkPreview"></div>
                                        </div>
                                        <div class="col-lg-6 mb-3">
                                            <div class="form-floating">
                                                <input type="file" class="form-control cosmic-input" id="imagesInput" accept="image/*" multiple>
                                                <label for="imagesInput">
                                                    <i class="fas fa-images me-2"></i>ç¬¬äºŒæ­¥ï¼šä¸Šå‚³è¦æ·»åŠ æµ®æ°´å°çš„åœ–ç‰‡
                                                </label>
                                            </div>
                                            <div class="preview-gallery mt-3" id="imagesPreview"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- è¨­å®šå€åŸŸ -->
                        <div class="settings-section mb-4">
                            <div class="settings-card">
                                <div class="settings-header">
                                    <h2><i class="fas fa-cogs me-2"></i>æµ®æ°´å°åƒæ•¸æ§åˆ¶å°</h2>
                                </div>
                                <div class="settings-body">
                                    <div class="row g-4">
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                <label class="form-label">
                                                    <i class="fas fa-map-marker-alt me-2"></i>ä½ç½®è¨­å®š
                                                    <small class="text-muted d-block">é¸æ“‡æµ®æ°´å°åœ¨åœ–ç‰‡ä¸Šçš„ä½ç½®</small>
                                                </label>
                                                <div class="position-selector" data-tooltip="é»æ“Šé¸æ“‡æµ®æ°´å°ä½ç½®">
                                                    <button class="btn-cosmic position-btn" data-position="top-left" data-tooltip="å·¦ä¸Šè§’">å·¦ä¸Š</button>
                                                    <button class="btn-cosmic position-btn" data-position="top-right" data-tooltip="å³ä¸Šè§’">å³ä¸Š</button>
                                                    <button class="btn-cosmic position-btn active" data-position="center" id="defaultPosition" data-tooltip="å±…ä¸­ä½ç½®">ç½®ä¸­</button>
                                                    <button class="btn-cosmic position-btn" data-position="bottom-left" data-tooltip="å·¦ä¸‹è§’">å·¦ä¸‹</button>
                                                    <button class="btn-cosmic position-btn" data-position="bottom-right" data-tooltip="å³ä¸‹è§’">å³ä¸‹</button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                <label class="form-label">
                                                    <i class="fas fa-expand-arrows-alt me-2"></i>å¤§å°è¨­å®š
                                                    <small class="text-muted d-block">èª¿æ•´æµ®æ°´å°çš„å°ºå¯¸å¤§å°</small>
                                                </label>
                                                <div class="form-floating mb-2">
                                                    <input type="number" id="watermarkWidth" class="form-control cosmic-input" min="10" value="200" data-tooltip="æµ®æ°´å°å¯¬åº¦(åƒç´ )">
                                                    <label for="watermarkWidth">å¯¬åº¦ (åƒç´ )</label>
                                                </div>
                                                <div class="form-floating mb-2">
                                                    <input type="number" id="watermarkHeight" class="form-control cosmic-input" min="10" value="200" data-tooltip="æµ®æ°´å°é«˜åº¦(åƒç´ )">
                                                    <label for="watermarkHeight">é«˜åº¦ (åƒç´ )</label>
                                                </div>
                                                <div class="form-check">
                                                    <input type="checkbox" id="maintainAspect" class="form-check-input cosmic-checkbox" checked data-tooltip="ä¿æŒåŸå§‹é•·å¯¬æ¯”ä¾‹">
                                                    <label for="maintainAspect" class="form-check-label">
                                                        <i class="fas fa-lock me-2"></i>ä¿æŒåŸå§‹æ¯”ä¾‹
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                <label for="opacityRange" class="form-label">
                                                    <i class="fas fa-layer-group me-2"></i>é€æ˜åº¦: <span id="opacityValue" class="badge bg-gradient text-dark">50%</span>
                                                    <small class="text-muted d-block">èª¿æ•´æµ®æ°´å°çš„é€æ˜ç¨‹åº¦</small>
                                                </label>
                                                <input type="range" id="opacityRange" class="form-range cosmic-range" min="10" max="100" value="50" data-tooltip="æ‹–å‹•èª¿æ•´é€æ˜åº¦">
                                                <div class="d-flex justify-content-between text-muted small mt-1">
                                                    <span>10%</span>
                                                    <span>50%</span>
                                                    <span>100%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- é è¦½å€åŸŸ -->
                        <div class="preview-section mb-4">
                            <div class="preview-card">
                                <div class="preview-header">
                                    <h2><i class="fas fa-eye me-2"></i>å¯¦æ™‚é è¦½ç³»çµ±</h2>
                                </div>
                                <div class="preview-body text-center">
                                    <div id="previewImage" class="preview-canvas mb-4">
                                        <p class="text-muted">ä¸Šå‚³åœ–ç‰‡å¾Œåœ¨é€™è£¡é è¦½æ•ˆæœ</p>
                                    </div>
                                    <button id="previewBtn" class="btn-cosmic" disabled>
                                        <i class="fas fa-eye me-2"></i>é è¦½æ•ˆæœ
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- ç”Ÿæˆå’Œä¸‹è¼‰å€åŸŸ -->
                        <div class="generate-section mb-4">
                            <div class="generate-card">
                                <div class="generate-header">
                                    <h2><i class="fas fa-magic me-2"></i>åœ–åƒè™•ç†èˆ‡è¼¸å‡º</h2>
                                </div>
                                <div class="generate-body">
                                    <div class="row justify-content-center">
                                        <div class="col-lg-6">
                                            <div class="form-floating mb-3">
                                                <select id="outputFormat" class="form-select cosmic-select">
                                                    <option value="jpeg">JPEG</option>
                                                    <option value="png">PNG</option>
                                                </select>
                                                <label for="outputFormat">
                                                    <i class="fas fa-file-image me-2"></i>è¼¸å‡ºæ ¼å¼
                                                </label>
                                            </div>
                                            
                                            <div class="form-group mb-4" id="jpegQualityContainer">
                                                <label for="jpegQuality" class="form-label">
                                                    <i class="fas fa-sliders-h me-2"></i>å“è³ª: <span id="qualityValue">90%</span>
                                                </label>
                                                <input type="range" id="jpegQuality" class="form-range cosmic-range" min="10" max="100" value="90">
                                            </div>
                                            
                                            <div class="text-center">
                                                <button id="processBtn" class="btn-cosmic me-3" disabled>
                                                    <i class="fas fa-magic me-2"></i>è™•ç†åœ–ç‰‡
                                                </button>
                                                <button id="downloadBtn" class="btn-cosmic-secondary" disabled>
                                                    <i class="fas fa-download me-2"></i>ä¸‹è¼‰å…¨éƒ¨
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- çµæœé¡¯ç¤ºå€åŸŸ -->
                                    <div class="result-display-area mt-4" id="resultSection" style="display: none;">
                                        <div class="result-header">
                                            <h3><i class="fas fa-check-circle me-2"></i>è™•ç†çµæœ</h3>
                                        </div>
                                        <div id="resultGallery" class="result-gallery"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p class="copyright">Â© 2025 TINGé€ æ˜Ÿçƒ. All rights reserved.</p>
        </div>
    </footer>
    
    <!-- Processing Overlay -->
    <div id="processingOverlay" class="processing-overlay">
        <div class="processing-content">
            <div class="cosmic-spinner"></div>
            <div class="processing-text">æ­£åœ¨è™•ç†åœ–ç‰‡...</div>
            <div class="processing-details">è«‹ç¨å€™ï¼Œæ˜Ÿéš›è™•ç†ç³»çµ±æ­£åœ¨ç‚ºæ‚¨çš„åœ–ç‰‡æ·»åŠ æµ®æ°´å°</div>
        </div>
    </div>

    <!-- Success Animation -->
    <div id="successAnimation" class="success-animation" style="display: none;">
        <div class="success-icon">
            <i class="fas fa-check"></i>
        </div>
        <div class="success-title">è™•ç†å®Œæˆï¼</div>
        <div class="success-subtitle">æ‚¨çš„åœ–ç‰‡å·²æˆåŠŸæ·»åŠ æµ®æ°´å°</div>
    </div>

    <!-- Bootstrap æ ¸å¿ƒ JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Particles JS -->
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    
    <!-- Particles JS åˆå§‹åŒ–å’Œ Toast ç³»çµ± -->
    <script>
        // èª¿è©¦å·¥å…·ï¼šé¡¯ç¤ºè¼‰å…¥ç‹€æ…‹
        window.showDebugInfo = function() {
            const debugDiv = document.createElement('div');
            debugDiv.id = 'debug-info';
            debugDiv.style.cssText = `
                position: fixed;
                top: 10px;
                right: 10px;
                background: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 10px;
                border-radius: 5px;
                font-family: monospace;
                font-size: 12px;
                z-index: 9999;
                max-width: 300px;
                max-height: 200px;
                overflow-y: auto;
            `;
            
            const particlesContainer = document.getElementById('particles-js');
            const hasCanvas = particlesContainer ? particlesContainer.querySelector('canvas') : false;
            const hasFallback = particlesContainer ? particlesContainer.classList.contains('fallback-animation') : false;
            
            debugDiv.innerHTML = `
                <strong>ğŸ”§ Particles.js èª¿è©¦ä¿¡æ¯</strong><br>
                âœ“ particles.js è¼‰å…¥: ${typeof particlesJS !== 'undefined' ? 'æˆåŠŸ' : 'å¤±æ•—'}<br>
                âœ“ particles å®¹å™¨: ${particlesContainer ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}<br>
                âœ“ canvas å…ƒç´ : ${hasCanvas ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}<br>
                âœ“ å‚™ç”¨å‹•ç•«: ${hasFallback ? 'å·²å•Ÿå‹•' : 'æœªå•Ÿå‹•'}<br>
                âœ“ ç•¶å‰æ™‚é–“: ${new Date().toLocaleTimeString()}<br>
                <button onclick="document.body.removeChild(this.parentElement)" style="margin-top: 5px; padding: 2px 5px;">é—œé–‰</button>
            `;
            
            // ç§»é™¤èˆŠçš„èª¿è©¦ä¿¡æ¯
            const oldDebug = document.getElementById('debug-info');
            if (oldDebug) {
                document.body.removeChild(oldDebug);
            }
            
            document.body.appendChild(debugDiv);
        };

        // å¤šé‡ CDN å‚™æ´è¼‰å…¥ç³»çµ±
        function loadParticlesJS() {
            return new Promise((resolve, reject) => {
                // é¦–å…ˆæª¢æŸ¥æ˜¯å¦å·²è¼‰å…¥
                if (typeof particlesJS !== 'undefined') {
                    resolve();
                    return;
                }
                
                const cdnList = [
                    'https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js',
                    'https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js',
                    'https://unpkg.com/particles.js@2.0.0/particles.min.js'
                ];
                
                let currentCdn = 0;
                
                function tryLoadCdn() {
                    if (currentCdn >= cdnList.length) {
                        reject(new Error('All CDN sources failed'));
                        return;
                    }
                    
                    console.log(`å˜—è©¦è¼‰å…¥ particles.js from: ${cdnList[currentCdn]}`);
                    const script = document.createElement('script');
                    script.src = cdnList[currentCdn];
                    
                    script.onload = function() {
                        console.log(`âœ… particles.js è¼‰å…¥æˆåŠŸ from: ${cdnList[currentCdn]}`);
                        resolve();
                    };
                    
                    script.onerror = function() {
                        console.warn(`âŒ particles.js è¼‰å…¥å¤±æ•— from: ${cdnList[currentCdn]}`);
                        currentCdn++;
                        tryLoadCdn();
                    };
                    
                    document.head.appendChild(script);
                }
                
                tryLoadCdn();
            });
        }

        // Particles.js åˆå§‹åŒ–å‡½æ•¸ï¼ˆèˆ‡éŠ€æ²³åªæ•¸è¨ˆç®—å™¨å®Œå…¨ä¸€è‡´ï¼‰
        window.initParticlesSystem = function() {
            if (typeof particlesJS !== 'undefined') {
                particlesJS("particles-js", {
                    particles: {
                        number: { 
                            value: window.innerWidth > 768 ? 80 : 40, 
                            density: { enable: true, value_area: 800 } 
                        },
                        color: { value: "#ffffff" },
                        shape: { 
                            type: "circle",
                            stroke: { width: 0, color: "#000000" }
                        },
                        opacity: { 
                            value: 0.5, 
                            random: true,
                            anim: { enable: true, speed: 1, opacity_min: 0.1, sync: false }
                        },
                        size: { 
                            value: 3, 
                            random: true,
                            anim: { enable: true, speed: 2, size_min: 0.1, sync: false }
                        },
                        line_linked: {
                            enable: true,
                            distance: 150,
                            color: "#ffffff",
                            opacity: 0.4,
                            width: 1
                        },
                        move: {
                            enable: true,
                            speed: 2,
                            direction: "none",
                            random: true,
                            straight: false,
                            out_mode: "out",
                            bounce: false,
                            attract: { enable: false, rotateX: 600, rotateY: 1200 }
                        }
                    },
                    interactivity: {
                        detect_on: "canvas",
                        events: {
                            onhover: { enable: true, mode: "repulse" },
                            onclick: { enable: true, mode: "push" },
                            resize: true
                        },
                        modes: {
                            grab: { distance: 400, line_linked: { opacity: 1 } },
                            bubble: { distance: 400, size: 40, duration: 2, opacity: 8, speed: 3 },
                            repulse: { distance: 200, duration: 0.4 },
                            push: { particles_nb: 4 },
                            remove: { particles_nb: 2 }
                        }
                    },
                    retina_detect: true
                });
                
                console.log('ğŸ‰ Particles.js åˆå§‹åŒ–æˆåŠŸï¼æ˜Ÿåº§é€£ç·šå‹•ç•«å·²å•Ÿå‹•');
                
                // ç¢ºä¿ particles å®¹å™¨æ¨£å¼æ­£ç¢º
                const particlesContainer = document.getElementById('particles-js');
                if (particlesContainer) {
                    particlesContainer.style.cssText = `
                        position: fixed !important;
                        top: 0 !important;
                        left: 0 !important;
                        width: 100vw !important;
                        height: 100vh !important;
                        z-index: 1 !important;
                        pointer-events: none !important;
                        background: radial-gradient(ellipse at center, #1a1f3a 0%, #0f1527 50%, #000000 100%) !important;
                        overflow: hidden !important;
                    `;
                    console.log('âœ… Particles å®¹å™¨æ¨£å¼å·²è¨­å®š');
                    
                    // å¼·åˆ¶è§¸ç™¼ Particles.js é‡æ–°æ¸²æŸ“
                    setTimeout(() => {
                        const canvas = particlesContainer.querySelector('canvas');
                        if (canvas) {
                            console.log('âœ… Particles canvas å·²å‰µå»º:', canvas);
                            canvas.style.visibility = 'visible';
                            canvas.style.opacity = '1';
                            canvas.style.display = 'block';
                            // ç¢ºä¿ canvas æœ‰æ­£ç¢ºçš„å°ºå¯¸
                            canvas.width = window.innerWidth;
                            canvas.height = window.innerHeight;
                        } else {
                            console.warn('âŒ æ‰¾ä¸åˆ° particles canvasï¼Œé‡æ–°åˆå§‹åŒ–...');
                            // é‡æ–°åˆå§‹åŒ– Particles.js
                            setTimeout(() => {
                                if (typeof particlesJS !== 'undefined') {
                                    window.initParticlesSystem();
                                }
                            }, 500);
                        }
                    }, 500);
                }
            } else {
                console.warn('âš ï¸ Particles.js è¼‰å…¥å¤±æ•—ï¼Œä½¿ç”¨å‚™ç”¨æ˜Ÿç©ºæ•ˆæœ');
                window.initFallbackAnimation();
            }
        };

        // å‚™ç”¨å‹•ç•«ç³»çµ±ï¼ˆèˆ‡éŠ€æ²³åªæ•¸è¨ˆç®—å™¨ä¸€è‡´ï¼‰
        window.initFallbackAnimation = function() {
            console.log('ğŸ¨ å•Ÿå‹•å‚™ç”¨ CSS æ˜Ÿç©ºå‹•ç•«...');
            const particlesContainer = document.getElementById('particles-js');
            if (particlesContainer) {
                particlesContainer.innerHTML = `
                    <div class="fallback-stars"></div>
                    <div class="fallback-stars-2"></div>
                    <div class="fallback-stars-3"></div>
                `;
                particlesContainer.classList.add('fallback-animation');
                particlesContainer.style.cssText = `
                    position: fixed !important;
                    top: 0 !important;
                    left: 0 !important;
                    width: 100vw !important;
                    height: 100vh !important;
                    z-index: 1 !important;
                    pointer-events: none !important;
                    background: radial-gradient(ellipse at center, #1a1f3a 0%, #0f1527 50%, #000000 100%) !important;
                `;
                console.log('âœ… å‚™ç”¨å‹•ç•«å·²å•Ÿå‹•');
            }
        };

        // Toast æç¤ºè¨Šæ¯ç³»çµ±
        window.showToast = function(message, type = 'info') {
            // æª¢æŸ¥æ˜¯å¦å·²å­˜åœ¨ Toastï¼Œå¦‚æœæœ‰å‰‡ç§»é™¤
            const existingToast = document.querySelector('.cosmic-toast');
            if (existingToast) {
                document.body.removeChild(existingToast);
            }
            
            // å»ºç«‹æ–°çš„ Toast å…ƒç´ 
            const toast = document.createElement('div');
            toast.className = `cosmic-toast cosmic-toast-${type}`;
            
            // è¨­ç½® Toast å…§å®¹
            const icon = type === 'success' ? 'check-circle' : 
                         type === 'error' ? 'exclamation-circle' : 
                         type === 'warning' ? 'exclamation-triangle' : 'info-circle';
                         
            toast.innerHTML = `
                <div class="cosmic-toast-content">
                    <i class="fas fa-${icon} me-2"></i>
                    <span>${message}</span>
                </div>
            `;
            
            // å°‡ Toast æ·»åŠ åˆ°é é¢
            document.body.appendChild(toast);
            
            // é¡¯ç¤º Toast
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);
            
            // è‡ªå‹•éš±è— Toast
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (document.body.contains(toast)) {
                        document.body.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        };

        // æ»¾å‹•åˆ°ä¸Šå‚³å€åŸŸåŠŸèƒ½
        window.scrollToUpload = function() {
            const uploadSection = document.getElementById('uploadSection');
            if (uploadSection) {
                uploadSection.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
                showToast('ğŸ“¤ æº–å‚™é–‹å§‹ä¸Šå‚³åœ–ç‰‡ï¼', 'info');
            }
        };

        // è¿”å›é¦–é åŠŸèƒ½ï¼ˆå„ªåŒ–ç‰ˆï¼‰
        window.goToHomePage = function() {
            console.log('ğŸš€ è¿”å›é¦–é å‡½æ•¸è¢«èª¿ç”¨');
            
            try {
                // ä½¿ç”¨è‡ªå®šç¾©æ˜Ÿéš›ä¸»é¡Œç¢ºèªå°è©±æ¡†
                showCustomConfirm({
                    title: 'æ˜Ÿéš›å‚³é€ç¢ºèª',
                    message: 'æº–å‚™è¿”å›åˆ°æ˜Ÿçƒä¸»æ§ä¸­å¿ƒå—ï¼Ÿ',
                    icon: 'fas fa-rocket',
                    details: [
                        'ç›®å‰çš„æµ®æ°´å°è£½ä½œé€²åº¦',
                        'æ‰€æœ‰ä¸Šå‚³çš„åœ–ç‰‡èˆ‡è¨­å®š'
                    ],
                    confirmText: 'ç¢ºå®šå‚³é€',
                    cancelText: 'å–æ¶ˆ'
                }).then(confirmed => {
                    console.log('âœ… ç¢ºèªå°è©±æ¡†å›æ‡‰:', confirmed);
                    if (confirmed) {
                        showToast('ğŸš€ æ­£åœ¨å‚³é€è‡³æ˜Ÿçƒä¸»æ§ä¸­å¿ƒ...', 'info');
                        setTimeout(() => {
                            console.log('ğŸ¯ åŸ·è¡Œé é¢è·³è½‰');
                            window.location.href = '../index.html';
                        }, 800);
                    } else {
                        showToast('å·²å–æ¶ˆè¿”å›é¦–é ', 'info');
                    }
                }).catch(error => {
                    console.error('âŒ è‡ªå®šç¾©å°è©±æ¡†éŒ¯èª¤:', error);
                    // å‡ºéŒ¯æ™‚ä½¿ç”¨åŸç”Ÿç¢ºèªæ¡†
                    const confirmed = confirm('ç¢ºå®šè¦è¿”å›é¦–é å—ï¼Ÿ\n\nå°‡æœƒæ¸…é™¤ç›®å‰çš„æµ®æ°´å°è£½ä½œé€²åº¦å’Œæ‰€æœ‰ä¸Šå‚³çš„åœ–ç‰‡è¨­å®š');
                    if (confirmed) {
                        showToast('ğŸš€ æ­£åœ¨è¿”å›é¦–é ...', 'info');
                        setTimeout(() => {
                            window.location.href = '../index.html';
                        }, 500);
                    }
                });
            } catch (error) {
                console.error('âŒ goToHomePage åŸ·è¡ŒéŒ¯èª¤:', error);
                // æœ€çµ‚é™ç´šæ–¹æ¡ˆ
                const confirmed = confirm('ç¢ºå®šè¦è¿”å›é¦–é å—ï¼Ÿ');
                if (confirmed) {
                    window.location.href = '../index.html';
                }
            }
        };

        // è‡ªå®šç¾©æ˜Ÿéš›ä¸»é¡Œç¢ºèªå°è©±æ¡†å‡½æ•¸ï¼ˆç°¡åŒ–ç‰ˆï¼‰
        window.showCustomConfirm = function(options) {
            return new Promise((resolve) => {
                console.log('ğŸ¯ å‰µå»ºè‡ªå®šç¾©ç¢ºèªå°è©±æ¡†');
                
                try {
                    // å‰µå»ºé®ç½©å±¤
                    const overlay = document.createElement('div');
                    overlay.className = 'custom-confirm-overlay';
                    
                    // å‰µå»ºå°è©±æ¡†å®¹å™¨
                    const modal = document.createElement('div');
                    modal.className = 'custom-confirm-modal';
                    
                    // å‰µå»ºå°è©±æ¡†å…§å®¹
                    const content = `
                        <div class="custom-confirm-header">
                            <div class="custom-confirm-icon">
                                <i class="${options.icon}"></i>
                            </div>
                            <h3 class="custom-confirm-title">${options.title}</h3>
                        </div>
                        <div class="custom-confirm-body">
                            <p class="custom-confirm-message">${options.message}</p>
                            ${options.details ? `
                                <div class="custom-confirm-details">
                                    <p>å°‡æœƒæ¸…é™¤ï¼š</p>
                                    <ul>
                                        ${options.details.map(detail => `<li>${detail}</li>`).join('')}
                                    </ul>
                                </div>
                            ` : ''}
                        </div>
                        <div class="custom-confirm-actions">
                            <button class="custom-confirm-btn custom-confirm-btn-cancel" data-action="cancel">
                                ${options.cancelText}
                            </button>
                            <button class="custom-confirm-btn custom-confirm-btn-confirm" data-action="confirm">
                                ${options.confirmText}
                            </button>
                        </div>
                    `;
                    
                    modal.innerHTML = content;
                    overlay.appendChild(modal);
                    document.body.appendChild(overlay);
                    
                    // æ·»åŠ é»æ“Šäº‹ä»¶
                    const handleClick = (e) => {
                        const action = e.target.getAttribute('data-action');
                        if (action) {
                            console.log('ğŸ¯ ç”¨æˆ¶é¸æ“‡:', action);
                            
                            // ç§»é™¤å°è©±æ¡†
                            overlay.classList.remove('show');
                            setTimeout(() => {
                                if (document.body.contains(overlay)) {
                                    document.body.removeChild(overlay);
                                }
                            }, 300);
                            
                            // è¿”å›çµæœ
                            resolve(action === 'confirm');
                        }
                    };
                    
                    // é»æ“Šé®ç½©é—œé–‰
                    overlay.addEventListener('click', (e) => {
                        if (e.target === overlay) {
                            console.log('ğŸ¯ é»æ“Šé®ç½©é—œé–‰');
                            overlay.classList.remove('show');
                            setTimeout(() => {
                                if (document.body.contains(overlay)) {
                                    document.body.removeChild(overlay);
                                }
                            }, 300);
                            resolve(false);
                        }
                    });
                    
                    modal.addEventListener('click', handleClick);
                    
                    // é¡¯ç¤ºå‹•ç•«
                    setTimeout(() => {
                        overlay.classList.add('show');
                    }, 10);
                    
                } catch (error) {
                    console.error('âŒ è‡ªå®šç¾©å°è©±æ¡†å‰µå»ºå¤±æ•—:', error);
                    // é™ç´šåˆ°åŸç”Ÿç¢ºèªæ¡†
                    const confirmed = confirm(`${options.title}\n\n${options.message}\n\nå°‡æœƒæ¸…é™¤ï¼š\n${options.details ? options.details.map(d => `â€¢ ${d}`).join('\n') : ''}`);
                    resolve(confirmed);
                }
            });
        };

        // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸŒŸ DOMè¼‰å…¥å®Œæˆï¼Œé–‹å§‹åˆå§‹åŒ–...');
            
            // å¼·åˆ¶åˆå§‹åŒ– Particles.jsï¼ˆå¤šé‡ä¿éšªï¼‰
            const initParticles = () => {
                console.log('ğŸ¯ å¼·åˆ¶åˆå§‹åŒ– Particles.js');
                window.showDebugInfo(); // é¡¯ç¤ºèª¿è©¦ä¿¡æ¯
                
                if (typeof particlesJS !== 'undefined') {
                    window.initParticlesSystem();
                } else {
                    console.log('âš ï¸ Particles.js å°šæœªè¼‰å…¥ï¼Œä½¿ç”¨å‚™ç”¨å‹•ç•«');
                    window.initFallbackAnimation();
                }
                
                // 3ç§’å¾Œå†æ¬¡é¡¯ç¤ºèª¿è©¦ä¿¡æ¯
                setTimeout(window.showDebugInfo, 3000);
            };
            
            // ç«‹å³å˜—è©¦åˆå§‹åŒ–
            initParticles();
            
            // 0.5ç§’å¾Œå†æ¬¡å˜—è©¦
            setTimeout(initParticles, 500);
            
            // 1ç§’å¾Œå†æ¬¡å˜—è©¦
            setTimeout(initParticles, 1000);
            
            // å¼·åˆ¶è¼‰å…¥ Particles.js
            loadParticlesJS().then(() => {
                console.log('âœ… Particles.js å¼·åˆ¶è¼‰å…¥å®Œæˆ');
                setTimeout(() => {
                    window.initParticlesSystem();
                }, 100);
            }).catch(() => {
                console.log('ğŸ¨ å¼·åˆ¶è¼‰å…¥å¤±æ•—ï¼Œä½¿ç”¨å‚™ç”¨å‹•ç•«');
                window.initFallbackAnimation();
            });
            
            // æ·»åŠ æŒ‰éˆ•äº‹ä»¶ç›£è½å™¨ä½œç‚ºå‚™ç”¨æ–¹æ¡ˆ
            const homeBtn = document.getElementById('homeBtn');
            const startBtn = document.getElementById('startBtn');
            
            if (homeBtn) {
                homeBtn.addEventListener('click', function(e) {
                    console.log('ğŸ  å‚™ç”¨è¿”å›é¦–é äº‹ä»¶è¢«è§¸ç™¼');
                    e.preventDefault();
                    e.stopPropagation();
                    goToHomePage();
                });
                console.log('âœ… è¿”å›é¦–é æŒ‰éˆ•äº‹ä»¶ç›£è½å™¨å·²æ·»åŠ ');
                
                // æ¸¬è©¦æŒ‰éˆ•åŠŸèƒ½
                console.log('ğŸ§ª æ¸¬è©¦æŒ‰éˆ•åŠŸèƒ½...');
                setTimeout(() => {
                    console.log('ğŸ” homeBtnå…ƒç´ :', homeBtn);
                    console.log('ğŸ” goToHomePageå‡½æ•¸:', typeof goToHomePage);
                }, 1000);
            } else {
                console.error('âŒ ç„¡æ³•æ‰¾åˆ°è¿”å›é¦–é æŒ‰éˆ•');
            }
            
            if (startBtn) {
                startBtn.addEventListener('click', function(e) {
                    console.log('ğŸš€ å‚™ç”¨é–‹å§‹è£½ä½œäº‹ä»¶è¢«è§¸ç™¼');
                    e.preventDefault();
                    e.stopPropagation();
                    scrollToUpload();
                });
                console.log('âœ… é–‹å§‹è£½ä½œæŒ‰éˆ•äº‹ä»¶ç›£è½å™¨å·²æ·»åŠ ');
            } else {
                console.error('âŒ ç„¡æ³•æ‰¾åˆ°é–‹å§‹è£½ä½œæŒ‰éˆ•');
            }
            
            // è¼‰å…¥ä¸¦åˆå§‹åŒ– Particles.jsï¼ˆç§»é™¤é‡è¤‡è¼‰å…¥ï¼‰
            // é¡¯ç¤ºæ­¡è¿ Toast
            setTimeout(() => {
                showToast('ğŸŒŸ æ­¡è¿ä½¿ç”¨æ˜Ÿéš›æµ®æ°´å°è£½é€ æ©Ÿï¼', 'success');
            }, 1000);
        });

        // éŸ¿æ‡‰å¼èª¿æ•´
        window.addEventListener('resize', function() {
            if (typeof pJSDom !== 'undefined' && pJSDom[0] && pJSDom[0].pJS) {
                pJSDom[0].pJS.particles.number.value = window.innerWidth > 768 ? 80 : 40;
                pJSDom[0].pJS.fn.particlesRefresh();
            }
        });
    </script>
    
    <!-- ä¿®å¾©ä¸‹æ‹‰é¸å–® JS -->
    <script src="../js/dropdown-fix.js"></script>
    <!-- è‡ªè¨‚ JS -->
    <script src="../js/watermark.js"></script>
</body>
</html>