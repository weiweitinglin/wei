<!DOCTYPE html>
<html lang="zh-tw">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>銀河坪數計算器 - 廷造星球</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@400;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../css/styles.css" rel="stylesheet">
    <link href="../css/fix-sizes.css" rel="stylesheet">
    <link href="../css/overtime-calculator.css" rel="stylesheet">
</head>

<body id="page-top" class="overtime-calculator">
    <!-- 宇宙背景 -->
    <div class="cosmic-background">
        <div class="stars"></div>
        <div class="stars2"></div>
        <div class="stars3"></div>
    </div>

    <!-- 導航欄 -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
        <div class="container px-4 px-lg-5">
            <!-- 導航品牌 -->
            <a class="navbar-brand" href="../index.html">
                <span class="brand-icon">
                    <div class="planet-ring"></div>
                    <div class="planet"></div>
                </span>
                TING造星球
            </a>
            <!-- 漢堡選單按鈕 -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
            <!-- 導航選項 -->
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="../index.html#about">星球簡介</a></li>
                    <li class="nav-item"><a class="nav-link" href="../index.html#projects">地表資源</a></li>
                    <li class="nav-item"><a class="nav-link" href="/wei/html/overtime_calculator.html">銀河工時計量器</a></li>
                    <li class="nav-item"><a class="nav-link" href="/wei/html/QR code.html">星碼工廠</a></li>
                    <!-- 下拉選單 -->
                    <li class="nav-item dropdown mobile-dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="toolsDropdown" role="button" 
                           data-bs-toggle="dropdown" aria-expanded="false" 
                           aria-haspopup="true">
                            小工具衛星
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="toolsDropdown">
                            <li><a class="dropdown-item" href="/wei/html/flooring_calculator.html">地板拼接計算器</a></li>
                            <li><a class="dropdown-item active" href="/wei/html/flooring_number of square meters.html">坪數計算器</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- 主要內容區域 -->
    <div class="container calculator-container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <!-- 標題區域 -->
                <div class="text-center mb-5">
                    <h1 class="cosmic-title">
                        <i class="fas fa-calculator me-2"></i>銀河坪數計算器
                    </h1>
                    <p class="cosmic-subtitle">輸入空間的長度和寬度，瞬間轉換成精確坪數</p>
                </div>

                <!-- 計算器主體 -->
                <div class="calculator-panel">
                    <!-- 輸入表單 -->
                    <div class="row mb-4">
                        <div class="col-md-6 mb-3">
                            <label for="length_cm" class="form-label">
                                <i class="fas fa-arrows-alt-h me-2"></i>長度（公分）
                            </label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="length_cm" placeholder="請輸入長度">
                                <span class="input-group-text">cm</span>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="width_cm" class="form-label">
                                <i class="fas fa-arrows-alt-v me-2"></i>寬度（公分）
                            </label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="width_cm" placeholder="請輸入寬度">
                                <span class="input-group-text">cm</span>
                            </div>
                        </div>
                    </div>

                    <!-- 計算按鈕 -->
                    <div class="text-center mb-4">
                        <button type="button" class="btn btn-cosmic calculate-btn" id="calculateBtn">
                            <i class="fas fa-calculator me-2"></i>計算坪數
                        </button>
                    </div>

                    <!-- 結果顯示 -->
                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <div class="info-box">
                                <h3><i class="fas fa-chart-area me-2"></i>面積</h3>
                                <p id="areaResult">-- 平方公尺</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="info-box">
                                <h3><i class="fas fa-vector-square me-2"></i>坪數</h3>
                                <p id="pingResult">-- 坪</p>
                            </div>
                        </div>
                    </div>

                    <!-- 視覺化圖形 -->
                    <div class="visual-box">
                        <h3 class="visual-title"><i class="fas fa-draw-polygon me-2"></i>空間視圖</h3>
                        <div class="canvas-wrapper">
                            <canvas id="canvas" width="700" height="400"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 頁尾 -->
    <footer class="footer bg-black small text-center text-white-50">
        <div class="container px-4 px-lg-5">
            <p>© 2025 銀河計算系統 | 探索宇宙間的精確計算</p>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- 自定義 JS -->
    <script>
        // 當頁面載入完成時執行
        document.addEventListener('DOMContentLoaded', function() {
            // 獲取DOM元素
            const lengthInput = document.getElementById('length_cm');
            const widthInput = document.getElementById('width_cm');
            const calculateBtn = document.getElementById('calculateBtn');
            const areaResultElement = document.getElementById('areaResult');
            const pingResultElement = document.getElementById('pingResult');
            const canvas = document.getElementById('canvas');
            
            // 初始化畫布
            initCanvas();
            
            // 綁定按鈕點擊事件
            calculateBtn.addEventListener('click', calculateArea);
            
            // 計算面積函數
            function calculateArea() {
                try {
                    // 獲取輸入值
                    const length = parseFloat(lengthInput.value);
                    const width = parseFloat(widthInput.value);
                    
                    // 驗證輸入
                    if (isNaN(length) || isNaN(width)) {
                        showToast('請輸入有效的數字！', 'error');
                        return;
                    }
                    
                    if (length <= 0 || width <= 0) {
                        showToast('長度和寬度必須是正數！', 'error');
                        return;
                    }
                    
                    // 計算坪數
                    const areaSquareMeters = (length / 100) * (width / 100);
                    const areaPing = areaSquareMeters / 3.305785;
                    
                    // 顯示結果
                    areaResultElement.textContent = `${areaSquareMeters.toFixed(2)} 平方公尺`;
                    pingResultElement.textContent = `${areaPing.toFixed(2)} 坪`;
                    
                    // 結果動畫效果
                    animateResults();
                    
                    // 繪製矩形
                    drawRectangle(length, width);
                    
                    // 顯示成功訊息
                    showToast('計算完成！', 'success');
                    
                } catch (error) {
                    console.error("計算錯誤:", error);
                    showToast('計算過程中發生錯誤！', 'error');
                }
            }
            
            // 初始化畫布
            function initCanvas() {
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // 設置深空背景
                ctx.fillStyle = '#0c1445';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // 繪製一些小星星
                drawStars(ctx, 100);
                
                // 顯示提示文字
                ctx.font = '16px "Space Grotesk", sans-serif';
                ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
                ctx.textAlign = 'center';
                ctx.fillText('', canvas.width / 2, canvas.height / 2);
            }
            
            // 繪製星星
            function drawStars(ctx, count) {
                for (let i = 0; i < count; i++) {
                    const x = Math.random() * canvas.width;
                    const y = Math.random() * canvas.height;
                    const radius = Math.random() * 1.5;
                    const opacity = Math.random() * 0.8 + 0.2;
                    
                    ctx.beginPath();
                    ctx.arc(x, y, radius, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(255, 255, 255, ${opacity})`;
                    ctx.fill();
                    
                    // 有時候添加光暈效果
                    if (Math.random() > 0.8) {
                        ctx.beginPath();
                        ctx.arc(x, y, radius * 3, 0, Math.PI * 2);
                        ctx.fillStyle = `rgba(111, 155, 255, ${opacity * 0.3})`;
                        ctx.fill();
                    }
                }
            }
            
            // 繪製矩形
            function drawRectangle(length, width) {
                const ctx = canvas.getContext('2d');
                
                // 清空畫布
                initCanvas();
                
                // 計算適當的縮放比例
                const maxDimension = Math.max(length, width);
                const scaleFactor = Math.min(canvas.width * 0.7 / width, canvas.height * 0.7 / length);
                
                // 縮放後的尺寸
                const lengthScaled = length * scaleFactor;
                const widthScaled = width * scaleFactor;
                
                // 計算居中位置
                const startX = (canvas.width - widthScaled) / 2;
                const startY = (canvas.height - lengthScaled) / 2;
                
                // 設置矩形樣式 - 使用漸變填充
                const gradient = ctx.createLinearGradient(startX, startY, startX + widthScaled, startY + lengthScaled);
                gradient.addColorStop(0, 'rgba(81, 125, 225, 0.6)');
                gradient.addColorStop(1, 'rgba(111, 155, 255, 0.4)');
                
                // 繪製矩形
                ctx.fillStyle = gradient;
                ctx.strokeStyle = '#4fc3f7';
                ctx.lineWidth = 2;
                ctx.shadowBlur = 10;
                ctx.shadowColor = 'rgba(79, 195, 247, 0.5)';
                
                ctx.beginPath();
                ctx.rect(startX, startY, widthScaled, lengthScaled);
                ctx.fill();
                ctx.stroke();
                
                // 移除陰影效果，以免影響後續繪製
                ctx.shadowBlur = 0;
                
                // 繪製尺寸標籤
                ctx.font = '14px "Space Grotesk", sans-serif';
                ctx.fillStyle = '#ffffff';
                ctx.textAlign = 'center';
                
                // 寬度標籤
                ctx.fillText(`${width} cm`, startX + widthScaled / 2, startY + lengthScaled + 25);
                
                // 長度標籤
                ctx.save();
                ctx.translate(startX - 20, startY + lengthScaled / 2);
                ctx.rotate(-Math.PI / 2);
                ctx.fillText(`${length} cm`, 0, 0);
                ctx.restore();
                
                // 在四個角落添加點
                drawCornerPoint(ctx, startX, startY);
                drawCornerPoint(ctx, startX + widthScaled, startY);
                drawCornerPoint(ctx, startX, startY + lengthScaled);
                drawCornerPoint(ctx, startX + widthScaled, startY + lengthScaled);
            }
            
            // 繪製角落點
            function drawCornerPoint(ctx, x, y) {
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fillStyle = '#4fc3f7';
                ctx.fill();
                
                ctx.beginPath();
                ctx.arc(x, y, 8, 0, Math.PI * 2);
                ctx.strokeStyle = 'rgba(79, 195, 247, 0.5)';
                ctx.lineWidth = 1;
                ctx.stroke();
            }
            
            // 結果數字動畫效果
            function animateResults() {
                const infoBoxes = document.querySelectorAll('.info-box');
                infoBoxes.forEach(box => {
                    box.classList.add('pulse-animation');
                    setTimeout(() => {
                        box.classList.remove('pulse-animation');
                    }, 1000);
                });
            }
            
            // Toast 提示訊息
            function showToast(message, type = 'info') {
                // 檢查是否已存在 Toast，如果有則移除
                const existingToast = document.querySelector('.cosmic-toast');
                if (existingToast) {
                    document.body.removeChild(existingToast);
                }
                
                // 建立新的 Toast 元素
                const toast = document.createElement('div');
                toast.className = `cosmic-toast cosmic-toast-${type}`;
                
                // 設置 Toast 內容
                const icon = type === 'success' ? 'check-circle' : 
                             type === 'error' ? 'exclamation-circle' : 
                             type === 'warning' ? 'exclamation-triangle' : 'info-circle';
                             
                toast.innerHTML = `
                    <div class="cosmic-toast-content">
                        <i class="fas fa-${icon} me-2"></i>
                        <span>${message}</span>
                    </div>
                `;
                
                // 將 Toast 添加到頁面
                document.body.appendChild(toast);
                
                // 顯示 Toast
                setTimeout(() => {
                    toast.classList.add('show');
                }, 10);
                
                // 自動隱藏 Toast
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        document.body.removeChild(toast);
                    }, 300);
                }, 3000);
            }
            
            // 為輸入框添加鍵盤事件監聽
            lengthInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    widthInput.focus();
                }
            });
            
            widthInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    calculateArea();
                }
            });
        });
    </script>
    
    <!-- 網頁特定樣式 -->
    <style>
        /* 視覺化圖形區域 */
        .visual-box {
            background: rgba(16, 23, 41, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            border: 1px solid rgba(111, 127, 255, 0.2);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            padding: 20px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .visual-title {
            color: #a0c9ff;
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: 600;
            text-align: center;
        }
        
        .canvas-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(10, 15, 30, 0.5);
            padding: 15px;
            border-radius: 8px;
            overflow: hidden;
        }
        
        canvas {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
        }
        
        /* 結果動畫 */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        
        .pulse-animation {
            animation: pulse 0.5s ease-in-out;
        }
        
        /* 調整行動裝置上的顯示 */
        @media (max-width: 576px) {
            .cosmic-title {
                font-size: 1.5rem;
            }
            
            .cosmic-subtitle {
                font-size: 0.9rem;
            }
            
            .info-box h3 {
                font-size: 0.9rem;
            }
            
            .info-box p {
                font-size: 1.2rem;
            }
        }
    </style>
</body>
</html>
